<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Propose a Talk</a>

    <ul class="navbar-nav navbar-expand-md ml-auto">
        <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/account">Account</a>
        </li>
        {{#if hasProposals}}
        <li class="nav-item">
            <a class="nav-link" href="/proposals">My Proposals</a>
        </li>
        {{/if}}
        <li class="nav-item">
            <a class="nav-link" href="/disconnect" data-toggle="tooltip" data-placement="bottom" title="Disconnect">{{{icon 'x-circle-fill' 'disconnect' '#998030'}}}</a>
        </li>
    </ul>
</nav>

{{#each alerts}}
<div class="alert alert-{{this.class}} m-3" role="alert">{{{input_long this.message}}}</div>
{{/each}}

<div>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active my-3" id="proposal" role="tabpanel" aria-labelledby="proposal-tab">
            <form method="POST" action="/cfp">
                <input type="hidden" name="cfpid" value="{{cfpid}}">
                <div class="card my-3">
                    <div class="card-header">
                        <h5 class="card-title">Presentation</h5>
                        <h6 class="card-subtitle mb-2 text-muted">This part will be visible to all the jury members.</h6>
                        <p>
                            Long fields (abstract, outline...) support markdown.<br/>
                            You can save your form and come back later to finish it, but don't forget to submit before the deadline.<br/>
                            <br/>
                            &#127467;&#127479; Si votre présentation est en français uniquement, écrivez vos réponses en français.
                        </p>
                    </div>
                    <div class="card-body">
                        <div class="form-group required">
                            <div>
                                <label class='control-label'>Which language will you present in?</label>
                                <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                    data-placement="right" data-html=true data-content="{{{languageAdvice}}}">{{{adviceIcon}}}</button>
                            </div>
                
                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-light active"><input type="radio" id="language1" name="language" value="English"
                                        required {{checked language 'English' }}>English</label>
                                <label class="btn btn-light active"><input type="radio" id="language2" name="language" value="French"
                                        required {{checked language 'French' }}>Français</label>
                                <label class="btn btn-light active"><input type="radio" id="language3" name="language" value="Either"
                                        required {{checked language 'Either' }}>Either</label>
                            </div>
                        </div>
                        <div class="form-group required">
                            <label for="title-input" class='control-label'>Title of the presentation</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{titleAdvice}}}">{{{adviceIcon}}}</button>
                            <input name="title" type="text" class="form-control" id="title-input" value="{{title}}" required>
                        </div>
                        <div class="form-group required">
                            <div>
                                <label class='control-label'>Which Track are you targetting?</label>
                                <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                    data-placement="right" data-html=true data-content="{{{trackAdvice}}}">{{{adviceIcon}}}</button>
                            </div>
                
                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-light active"><input type="radio" id="track1" name="track" value="Progress"
                                        required {{checked track 'Progress' }}>Progress</label>
                                <label class="btn btn-light active"><input type="radio" id="track2" name="track" value="Produce"
                                        required {{checked track 'Produce' }}>Produce</label>
                                <label class="btn btn-light active"><input type="radio" id="track3" name="track" value="Push Forward"
                                        required {{checked track 'Push Forward' }}>Push Forward</label>
                            </div>
                        </div>
                        <div class="form-group required">
                            <label for="abstract-input" class='control-label'>Abstract</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{abstractAdvice}}}">{{{adviceIcon}}}</button>
                            <textarea class="form-control" aria-label="Abstract" id="abstract-input" name="abstract" rows=6
                                required>{{abstract}}</textarea>
                        </div>
                        <div class="form-group required">
                            <label for="outline-input" class='control-label'>Outline</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{outlineAdvice}}}">{{{adviceIcon}}}</button>
                            <textarea class="form-control" aria-label="Outline" id="outline-input" name="outline" rows=8
                                required>{{outline}}</textarea>
                        </div>
                        <div class="form-group required">
                            <div>
                                <label class='control-label'>Preferred Talk Duration</label>
                                <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                    data-placement="right" data-html=true data-content="{{{durationAdvice}}}">{{{adviceIcon}}}</button>
                            </div>
                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-light active"><input type="radio" id="duration1" name="duration"
                                        value="30 minutes" required {{checked duration '30 minutes' }}>30 minutes</label>
                                <label class="btn btn-light active"><input type="radio" id="duration2" name="duration"
                                        value="60 minutes" required {{checked duration '60 minutes' }}>60 minutes</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div>
                                <label for="tagsInput" class="control-label">Tags</label>
                                <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                    data-placement="right" data-html=true data-content="{{{tagsAdvice}}}">{{{adviceIcon}}}</button>
                            </div>
                            <input id="tagsInput" aria-label="Tags" name="tags" value="{{tags}}"/>
                        </div>
                        <div class="form-group">
                            <label for="anything-input" class='control-label'>Is there anything else you would like to tell
                                us?</label>
                            <textarea class="form-control" aria-label="Is there anything else you would like to tell us?"
                                id="anything-input" name="anything" rows=5>{{anything}}</textarea>
                        </div>
                    </div>
                </div>
                <div class="card my-3">
                    <div class="card-header">
                        <h5 class="card-title">Speaker</h5>
                        <h6 class="card-subtitle mb-2 text-muted">This part will be visible only to the organizers after a first phase of anonymous scoring has been completed.</h6>
                        <p>Answers to this part are linked to your account and will apply to all your proposals.</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group required">
                            <label for="firstNameInput" class='control-label'>First Name</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{nameAdvice}}}">{{{adviceIcon}}}</button>
                            <input name="firstName" type="text" class="form-control" id="firstNameInput" value="{{firstName}}" required>
                        </div>
                
                        <div class="form-group required">
                            <label for="lastNameInput" class='control-label'>Last Name</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{nameAdvice}}}">{{{adviceIcon}}}</button>
                            <input name="lastName" type="text" class="form-control" id="lastNameInput" value="{{lastName}}" required>
                        </div>
                        <div class="form-group">
                            <label for="affiliationInput" class='control-label'>Affiliation</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{affiliationAdvice}}}">{{{adviceIcon}}}</button>
                            <input name="affiliation" type="text" class="form-control" id="affiliationInput" value="{{affiliation}}">
                        </div>
                        <div class="form-group required">
                            <label for="bio-input" class='control-label'>Bio</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{bioAdvice}}}">{{{adviceIcon}}}</button>
                            <textarea name="bio" type="text" class="form-control" id="bio-input" rows=5 required>{{bio}}</textarea>
                        </div>
                        <div class="form-group">
                            <label for="past-input" class='control-label'>Past Experience As a Speaker</label>
                            <button type="button" class="btn btn-outline-info btn-sm" data-container="body" data-toggle="popover"
                                data-placement="right" data-html=true data-content="{{{experienceAdvice}}}">{{{adviceIcon}}}</button>
                            <textarea name="pastExperience" type="text" class="form-control" id="past-input" rows=5
                                >{{pastExperience}}</textarea>
                        </div>
                    </div>
                </div>
                <div class="form-group required">
                    <input type="checkbox" name="coc" value="ok" required id="coc-input" {{#if coc}}checked{{/if}}>
                    <label for="coc-input" class="control-label">I agree to respect the <a
                            href="https://berlincodeofconduct.org/">Berlin Code Of Conduct</a></label>
                </div>
                {{#if finished}}
                <button type="submit" name="push" value="submit" class="btn btn-primary">Edit submission</button>
                {{else}}
                <button type="submit" name="push" value="submit" class="btn btn-primary">Submit</button>
                <button type="submit" name="save" value="backup" class="btn btn-secondary" formnovalidate>Save & Preview</button>
                {{/if}}
            </form>
        </div>
        <div class="tab-pane fade show active" id="preview" role="tabpanel" aria-labelledby="preview-tab">
        </div>
    </div>
</div>
<script>
var config = {options: {{{possibleTags}}},
create: function(input){
	return {value:input,text:input}
},
createOnBlur: true,
plugins: {
		remove_button:{
			title:'Remove this item',
		}
	},};
new TomSelect('#tagsInput',config);
</script>